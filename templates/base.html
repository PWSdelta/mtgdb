<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name='impact-site-verification' value='e4f4b34b-8b4a-48c9-bf48-e0013691846d'>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="google-site-verification" content="hlf4Zk1mOsxscqCd3r3YIaD62ZdvhyKlLi2GP-c1Mfo" />
        <title>{% block title %}Magic The Gathering Database | PWSDELTA{% endblock %}</title>



    {% block meta_description %}
        {% if card %}
            <meta name="description" content="{{ card.name }} price | {{ card.set_name }} Magic: The Gathering Card" />
        {% elif set %}
            <meta name="description" content="{{ set.name }} - Magic: The Gathering Set Prices and Information" />
        {% elif search_results %}
            <meta name="description" content="Magic: The Gathering Card Search Results" />
        {% else %}
            <meta name="description" content="100k+ Magic: The Gathering cards from every set. Search, browse and price check your favorite MTG cards." />
        {% endif %}
    {% endblock %}


    <!-- Keywords -->
    {% block meta_keywords %}
    <meta name="keywords" content="Magic the Gathering, MTG, card database, card prices, MTG cards, card art, MTG artists" />
    {% endblock %}

    <!-- Open Graph tags for social sharing -->
    {% block og_meta %}
    <meta property="og:title" content="{% block og_title %}Magic The Gathering Database | PWSDELTA{% endblock %}" />
    <meta property="og:description" content="{% block og_description %}100k+ Magic: The Gathering cards from every set. Search, browse and price check your favorite MTG cards.{% endblock %}" />
    <meta property="og:type" content="{% block og_type %}website{% endblock %}" />
    <meta property="og:url" content="{{ request.url }}" />
    <meta property="og:image" content="{% block og_image %}{{ url_for('static', filename='og-image.jpg', _external=True) }}{% endblock %}" />
    {% endblock %}

    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}Magic The Gathering Database | PWSDELTA{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}100k+ Magic: The Gathering cards from every set. Search, browse and price check your favorite MTG cards.{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{{ url_for('static', filename='twitter-image.jpg', _external=True) }}{% endblock %}">

    <!-- Canonical URL tag -->
    <link rel="canonical" href="{{ request.url }}" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/litera/bootstrap.min.css" integrity="sha384-enpDwFISL6M3ZGZ50Tjo8m65q06uLVnyvkFO3rsoW0UC15ATBFz3QEhr3hmxpYsn" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/static/modern-business.css">


    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- masonry CSS for animations n stuff -->
    <style>
        .masonry-container,
        .masonry-item,
        .card {
          opacity: 1;
          visibility: visible;
        }

        /* Card hover effects only */
        .card.hover-zoom {
          transition: transform 0.3s ease;
        }

        .card.hover-zoom:hover {
          transform: scale(1.03);
        }

        .card.hover-shadow {
          transition: box-shadow 0.3s ease;
        }

        .card.hover-shadow:hover {
          box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23) !important;
        }




    </style>

    <meta name="google-adsense-account" content="ca-pub-8738029041920664">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8738029041920664"
     crossorigin="anonymous"></script>


</head>



<body class="d-flex flex-column h-100">



{% include "_navbar.html" %}
{#    {% include "_messages.html" %}#}

    <main>
        {% block content %}{% endblock %}
    </main>

{#    <main class="flex-shrink-0">#}
{#        {% block content %}#}
{#        {% endblock %}#}
{#    </main>#}


{#{% include "_footer.html" %}#}







<script src="{{ url_for('static', filename='bootstrap.bundle.min.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      tooltipTriggerList.forEach(function (tooltipTriggerEl) {
        new bootstrap.Tooltip(tooltipTriggerEl);
      });
    });

    document.addEventListener('DOMContentLoaded', function () {
      const popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
      popoverTriggerList.forEach(function (popoverTriggerEl) {
        new bootstrap.Popover(popoverTriggerEl);
      });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM Content Loaded');

        // Initialize masonry with vanilla JS (no jQuery)
        var grid = document.querySelector('.masonry-grid');

        if (grid) {
            console.log('Found masonry grid');

            // Check all images in the grid
            var images = grid.querySelectorAll('img');
            images.forEach(function(img) {
                // Log image source for debugging
                console.log('Image source:', img.src);

                // Add error handler to catch failed image loads
                img.addEventListener('error', function() {
                    console.error('Failed to load image:', img.src);
                    // Optional: replace with a placeholder
                    img.src = 'https://via.placeholder.com/300x200?text=Image+Not+Found';
                });

                // For each image, ensure it has proper styling
                img.style.display = 'block';
                img.style.maxWidth = '100%';
                img.style.height = 'auto';
                img.style.opacity = '1';
                img.style.visibility = 'visible';
            });

            // Initialize masonry after a short delay
            setTimeout(function() {
                var masonry = new Masonry(grid, {
                    itemSelector: '.masonry-item',
                    columnWidth: '.masonry-grid-sizer',
                    percentPosition: true,
                    transitionDuration: '0.4s',
                    gutter: 0
                });

                console.log('Masonry initialized');

                // Use imagesLoaded to handle both cached and uncached images
                imagesLoaded(grid, function() {
                    console.log('All images loaded (including cached ones)');

                    // Force layout calculation again
                    masonry.layout();

                    // Ensure all items are visible
                    var items = grid.querySelectorAll('.masonry-item');
                    items.forEach(function(item) {
                        item.style.opacity = '1';
                        item.style.visibility = 'visible';
                    });

                    // Add hover effects to cards
                    var cards = grid.querySelectorAll('.card');
                    cards.forEach(function(card) {
                        card.classList.add('hover-zoom', 'hover-shadow');
                    });

                    console.log('Layout complete with images visible');
                });

                // Add event listener for window resize
                window.addEventListener('resize', function() {
                    masonry.layout();
                });
            }, 300);
        }
    });
</script>


    <!-- Masonry -->
    <script src="https://unpkg.com/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script>
    <!-- Optional imagesLoaded plugin for better handling of images -->
    <script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>

</body>
</html>